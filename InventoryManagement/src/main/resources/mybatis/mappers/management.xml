<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.Dao.ManagementDao">

<!-- 상품입고  -->
<insert id="goodsImport">
insert into management(category,name,input,input_date)
   values(#{category},#{name}, #{input},now())
</insert>


<!-- 상품정보 -->
<select id="goodsInfo"  resultType="managementvo">
		<![CDATA[
			select category,name,input,export,back
              from management
                where category in(
                    select category
                    from management
                    group by category
                    having count(*)>=0
              );
		]]>
	</select>
	
	
<!-- 상품출고 -->
<update id="goodsExport"   parameterType="managementvo">
	<![CDATA[
			update management
					set export = #{export},
					       export_date = now(),
					       supplier = #{supplier}
					 where name = #{name}	
	]]>
</update>	


<!-- 상품반품 -->
<update id="goodsBack"   parameterType="managementvo">
	<![CDATA[
			update management
					set back = #{back},
					       back_date = now(),
					       back_info = #{back_info}
					 where name = #{name}	
	]]>
</update>	


<!-- 상품정보수정 -->
<update id="goodsUpdate"   parameterType="managementvo">
	<![CDATA[
			update management
					set name = #{name}
					 where number = #{number}	
	]]>
</update>	


<!-- 상품삭제 -->
<delete id="goodsDelete"  parameterType="int">
		<![CDATA[
		    delete
			from management
			 where number= #{number}
		]]>
</delete>


<!-- 모든상품삭제 -->
<delete id="goodsAllDelete"  >
		<![CDATA[
		    truncate management
		]]>
</delete>
</mapper>